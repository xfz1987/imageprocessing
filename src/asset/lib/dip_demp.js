define(["lib/matrix"],function(t){var a={canvas:null,ctx:null,matrix:null,init:function(t,a){return this.options=a||{},this.canvas=this.options.canvas?document.getElementById(this.options.canvas):document.getElementsByTagName("canvas")[0],this.ctx=this.canvas.getContext("2d"),t=t||document.getElementsByTagName("img")[0],this.read(t),this},read:function(a){var i=a.width,n=a.height;this.resize(i,n),this.ctx.drawImage(a,0,0);var e=this.ctx.getImageData(0,0,i,n);return this.matrix=new t(n,i,e.data),e=null,this},resize:function(t,a){return this.canvas.width=t,this.canvas.height=a,this},act:function(a){var i=+new Date;arguments[0]=this.matrix,this.matrix=t.prototype[a].apply(this,arguments);var n=+new Date,e=document.getElementById("cost");return e&&(e.innerHTML=n-i),this},_transform:function(){var t=this.matrix.col,a=this.matrix.row,i=this.ctx.createImageData(t,a);return i.data.set(this.matrix.data),i},show:function(){return this.ctx.putImageData(this._transform(this.matrix),0,0),this}};return a});